<ion-header>
  <ion-toolbar color='dark'>
    <img src="assets/images/freseLogo.png" width="140px" height="90px" class="ion-margin"/>
    <div slot="end" class="ion-padding-end">
      <ion-button color="frese" (click)="openPopover($event)">
        <ion-icon slot="start" name="information-circle-outline"></ion-icon>About Us
      </ion-button>
    </div>
  </ion-toolbar>
</ion-header>

<ion-content color="light">
  <ion-grid>
    <ion-row>
      <ion-col>
        <ion-card>
          <ion-list *ngIf="products; else loading">
            <ion-title>Entrees</ion-title>
            <p *ngFor="let item of products;">
              <ion-item *ngIf="item.typeId === 1">
                <ion-avatar slot="start">
                  <ion-img *ngIf="item.photoUrl; else noPhoto" [src]="item.photoUrl"></ion-img>
                  <ng-template #noPhoto>
                    <ion-img src="assets/images/null.jpg"></ion-img>
                  </ng-template>
                </ion-avatar>
                <ion-label class="ion-text-wrap">
                  {{ item.description }}
                  <p *ngIf="item.price">${{ item.price }}</p>
                </ion-label>
                <ion-button color='frese' (click)="updateCart(item)">Add to Cart</ion-button>
              </ion-item>
            </p>
            <ion-title>Desserts</ion-title>
            <p *ngFor="let item of products;">
              <ion-item *ngIf="item.typeId === 2">
                <ion-avatar slot="start">
                  <ion-img *ngIf="item.photoUrl; else noPhoto" [src]="item.photoUrl"></ion-img>
                  <ng-template #noPhoto>
                    <ion-img src="assets/images/null.jpg"></ion-img>
                  </ng-template>
                </ion-avatar>
                <ion-label class="ion-text-wrap">
                  {{ item.description }}
                  <p>${{ item.price }}</p>
                </ion-label>
                <ion-button color='frese' (click)="updateCart(item)">Add to Cart</ion-button>
              </ion-item>
            </p>
            <ion-title>Sides</ion-title>
            <p *ngFor="let item of products;">
              <ion-item *ngIf="item.typeId === 3">
                <ion-avatar slot="start">
                  <ion-img *ngIf="item.photoUrl; else noPhoto" [src]="item.photoUrl"></ion-img>
                  <ng-template #noPhoto>
                    <ion-img src="assets/images/null.jpg"></ion-img>
                  </ng-template>
                </ion-avatar>
                <ion-label class="ion-text-wrap">
                  {{ item.description }}
                  <p>${{ item.price }}</p>
                </ion-label>
                <ion-button color='frese' (click)="updateCart(item)">Add to Cart</ion-button>
              </ion-item>
            </p>
          </ion-list>
          <ng-template #loading>
            <ion-spinner name="lines"></ion-spinner>
          </ng-template>
        </ion-card>
      </ion-col>
      <ion-col>
        <ion-card>
          <ion-list>
            <ion-title>Cart</ion-title>
            <ion-item *ngFor="let item of cart.items">
              <ion-label>
                Item: {{ item.description }}
                  <ion-icon color='danger' name="remove-circle" (click)="decrement(item)"></ion-icon>
                  {{ item.quantity }}
                  <ion-icon color='success' name="add-circle" (click)="increment(item)"></ion-icon>
                <p>Price: ${{ item.price }}</p>
                <div *ngIf="item.addOns">
                  <ion-item>
                    <ion-label>Add Ons</ion-label>
                    <ion-select (ionChange)="addAddOn($event, item)" multiple="true" placeholder="Choose an Add On">
                      <ion-select-option *ngFor="let option of item.addOns" [value]=option.cost>
                        {{ option.value + ' $' + option.cost }}
                      </ion-select-option>
                    </ion-select>
                  </ion-item>
                </div>
              </ion-label>
            </ion-item>
          </ion-list>
          <p *ngIf="cart.items.length > 0; else emptyCart">
            <ion-item>Total: ${{ total }}</ion-item>
            <ion-item>
              <ion-button slot="end" color='success' (click)="checkOut(this.cart)">Checkout</ion-button>
            </ion-item>
          </p>
          <ng-template #emptyCart>
            <p style="text-indent:3%; color:red">Your Cart is Empty.</p>
          </ng-template>
        </ion-card>
      </ion-col>
    </ion-row>
  </ion-grid>
</ion-content>
